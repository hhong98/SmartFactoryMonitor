<UserControl x:Class="SmartFactoryMonitor.EquipList"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:SmartFactoryMonitor"
             mc:Ignorable="d"
             DataContext="{StaticResource MainVM}"
             Height="Auto" Width="Auto">
    <UserControl.Resources>
        <local:ActiveToColor x:Key="ActiveToColor" />
        <local:CheckedToFontWeight x:Key="CheckedToFontWeight" />
    </UserControl.Resources>
    <Grid Background="White">
        <ListView x:Name="EquipLV" ItemsSource="{Binding EquipManageVM.Equipments}"
                  GridViewColumnHeader.Click="SortingHandler"
                  BorderThickness="1">
            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <EventSetter Event="MouseDoubleClick" Handler="EquipRow_Click" />
                    <Setter Property="Foreground"
                            Value="{Binding IsActive, Converter={StaticResource ResourceKey=ActiveToColor}}" />
                    <Setter Property="FontWeight"
                            Value="{Binding IsChecked, Converter={StaticResource ResourceKey=CheckedToFontWeight}}" />
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="LightGray" />
                            <Setter Property="FontSize" Value="14" />
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </ListView.ItemContainerStyle>
            <ListView.View>
                <GridView>
                    <GridViewColumn Width="250">
                        <GridViewColumn.Header>
                            <StackPanel Orientation="Vertical">
                                <TextBlock Text="설비명" HorizontalAlignment="Center" Margin="10 0" />
                                <TextBox Tag="EquipName" Width="80" TextChanged="FilterTextChanged" />
                            </StackPanel>
                        </GridViewColumn.Header>
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding EquipName}" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn DisplayMemberBinding="{Binding IpAddress}">
                        <GridViewColumn.Header>
                            <StackPanel Orientation="Vertical">
                                <TextBlock Text="IP 주소" HorizontalAlignment="Center" Margin="10 0" />
                                <TextBox Tag="IpAddress" Width="100" TextChanged="FilterTextChanged" />
                            </StackPanel>
                        </GridViewColumn.Header>
                    </GridViewColumn>

                    <GridViewColumn DisplayMemberBinding="{Binding Location}">
                        <GridViewColumn.Header>
                            <StackPanel Orientation="Vertical">
                                <TextBlock Text="위치" HorizontalAlignment="Center" Margin="10 0" />
                                <TextBox Tag="Location" Width="80" TextChanged="FilterTextChanged" />
                            </StackPanel>
                        </GridViewColumn.Header>
                    </GridViewColumn>

                    <GridViewColumn x:Name="IsActive" DisplayMemberBinding="{Binding IsActive}">
                        <GridViewColumn.Header>
                            <StackPanel Orientation="Vertical">
                                <TextBlock Text="사용 유무" HorizontalAlignment="Center" Margin="10 0" />
                                <CheckBox Tag="IsActive" Checked="FilterCheckChanged" Unchecked="FilterCheckChanged" HorizontalAlignment="Center" />
                            </StackPanel>
                        </GridViewColumn.Header>
                    </GridViewColumn>

                    <GridViewColumn x:Name="IsChecked" Header="선택">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox IsChecked="{Binding IsChecked, UpdateSourceTrigger=PropertyChanged}"
                                      VerticalAlignment="Center" HorizontalAlignment="Center" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView>
    </Grid>
</UserControl>